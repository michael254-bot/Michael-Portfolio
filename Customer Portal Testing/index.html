<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>BusinessCom Customer Portal</title>
    <meta content="Customer portal for BusinessCom services" name="description" />
    <meta content="portal, businesscom, email delegation, people directory" name="keywords" />

    <link rel="stylesheet" href="https://portal.businesscom.africa/static/build/css/main.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" integrity="sha512-nMNlpuaDPrqlEls3IX/Q56H36qvBASwb3ipuo3MxeWbsQB1881ox0cRv7UPTgBlriqoynt35KjEwgGUeUXIPnw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div id="loginContainer">
        <div class="card login-card shadow-sm">
            <div class="card-body">
                <div class="text-center login-logo">
                    <img src="https://storage.googleapis.com/bcs-signature-images/BCS/Signature%20Icons/BCS%20Logo.png" alt="BusinessCom Logo">
                </div>
                <h4 class="card-title text-center mb-4">Portal Login</h4>
                <form id="loginForm">
                    <div class="mb-3">
                        <label for="loginEmail" class="form-label">Email address</label>
                        <input type="email" class="form-control" id="loginEmail" required placeholder="e.g., michael@example.com">
                    </div>
                    <div class="mb-3">
                        <label for="loginPassword" class="form-label">Password</label>
                        <input type="password" class="form-control" id="loginPassword" required placeholder="use 'password123'">
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-danger">Login</button>
                    </div>
                    <div id="loginError" class="text-danger mt-3" style="display: none;"></div>
                </form>
                <p class="mt-3 mb-0 text-muted text-center" style="font-size: 0.9em;">
                </p>
            </div>
        </div>
    </div>

    <div id="appContainer" style="display: none;">
        <div class="container-fluid p-0">
            <div class="row m-0 h-100" style="min-height: 100vh;">
                <aside class="col-md-2 p-3 bg-businesscom-grey">
                    <div class="sidebar-logo mb-5 text-center">
                        <img src="https://storage.googleapis.com/bcs-signature-images/BCS/Signature%20Icons/BCS%20Logo.png" alt="BusinessCom Logo" style="max-width: 150px; margin-top:10px;">
                    </div>
                    <div class="sidebar-menu position-relative" style="min-height: calc(100% - 200px);">
                        <div id="accordion" class="position-relative">
                            <div class="card"><div class="card-header"><a href="#dashboard" data-page="dashboard" class="nav-link"><i class="fas fa-tachometer-alt"></i> Dashboard</a></div></div>
                            <div class="card"><div class="card-header"><h5 class="mb-0"><a class="nav-link collapsed" data-bs-toggle="collapse" data-bs-target="#collapseSignatures" aria-expanded="false" aria-controls="collapseSignatures" data-page="signatures_parent"><i class="fas fa-file-signature"></i> Signatures</a></h5></div><div id="collapseSignatures" class="collapse" aria-labelledby="signature-nav" data-bs-parent="#accordion"><div class="card-body py-1"><ul><li><a href="#create-signature" data-page="create-signature" class="nav-link text-white">Create Signature</a></li><li><a href="#list-signatures" data-page="list-signatures" class="nav-link text-white">List Signatures</a></li></ul></div></div></div>
                            <div class="card"><div class="card-header"><h5 class="mb-0"><a href="#delegation" data-page="delegation" class="nav-link"><i class="fas fa-user-cog"></i> Email Delegation</a></h5></div></div>
                            <div class="card"><div class="card-header"><a href="#drive" data-page="drive" class="nav-link"><i class="fab fa-google-drive"></i> Drive</a></div></div>
                            <div class="card"><div class="card-header"><a href="#people" data-page="people" class="nav-link"><i class="fas fa-users"></i> People</a></div></div>
                            <div class="card"><div class="card-header"><a href="#settings" data-page="settings" class="nav-link"><i class="fas fa-cogs"></i> Settings</a></div></div>
                        </div>
                        <div class="user position-absolute w-100 px-3 py-3" style="bottom:0;">
                            <div class="d-flex align-items-center">
                                <div id="sidebarUserProfileImgContainer" class="user-img me-2 rounded-circle overflow-hidden" style="width:40px; height:40px; background-color: #6c757d; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5em; font-weight: 500;">
                                </div>
                                <div class="user-details flex-grow-1">
                                    <span id="sidebarUserName" class="text-white d-block" style="font-size:0.9rem;">User Name</span>
                                    <span id="sidebarUserRole" class="p-1 small bg-businesscom-maroon text-white rounded" style="font-size:0.7rem;">Role</span>
                                </div>
                                <a href="#logout" data-page="logout" id="logoutButton" class="nav-link text-white ms-auto" title="Logout"><i class="fas fa-sign-out-alt"></i></a>
                            </div>
                        </div>
                    </div>
                </aside>

                <div class="col-md-10 p-4 position-relative" style="background-color: #e9ecef;">
                    <div class="main-view p-0">
                        <div id="dashboardPageContent" class="page-content" style="display:none;">
                            <div class="page-content-wrapper"><h1><i class="fas fa-tachometer-alt me-2"></i>Dashboard</h1><p>Main dashboard overview and statistics</p></div>
                        </div>
                        
                        <div id="list-signaturesPageContent" class="page-content" style="display:none;">
                            <div class="page-content-wrapper">
                                <h1 class="mb-4"><i class="fas fa-list-ul me-2"></i>List Signatures</h1>
                                <div class="available-signatures mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            Available Signatures
                                        </div>
                                        <div class="card-body p-2">
                                            <ul class="list-group" id="signaturesList">
                                                <li class="list-group-item text-muted text-center">No signatures found. Create one.</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="management-signature">
                                    <div class="card">
                                        <div class="card-header d-flex justify-content-between align-items-center">
                                            <span>Management Signature</span>
                                            <div class="d-flex align-items-center">
                                                <div id="managementSignatureActions" class="signature-actions me-2">
                                                    </div>
                                                <a href="#create-signature" data-page="create-signature" class="btn btn-sm btn-primary">
                                                    <i class="fas fa-edit me-1"></i> Edit Signature
                                                </a>
                                            </div>
                                        </div>
                                        <div class="card-body p-2" id="managementSignaturePreview">
                                            <p class="text-muted text-center my-3">No management signature saved.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="create-signaturePageContent" class="page-content" style="display:none;">
                            <div class="page-content-wrapper">
                                <h1 class="mb-4"><i class="fas fa-plus-circle me-2"></i>Create Signature</h1>
                                <div class="editor-container">
                                    <label for="signatureCode" class="form-label">HTML Signature Code</label>
                                    <textarea id="signatureCode" class="form-control" rows="15" placeholder="Paste your HTML signature code here..."></textarea>
                                </div>
                                <div class="preview-container">
                                    <div class="card">
                                        <div class="card-header">Live Preview</div>
                                        <div class="card-body">
                                            <div id="signaturePreview">
                                                <p class="text-muted text-center my-3">Your live signature preview will show up here. Try pasting some HTML code into the text area.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button id="saveSignatureBtn" class="btn btn-primary"><i class="fas fa-save me-2"></i>Save Signature</button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="delegationPageContent" class="page-content" style="display:none;"> 
                            <div class="page-content-wrapper">
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <h1><i class="fas fa-user-cog me-2"></i>Email Delegation Management</h1>
                                </div>
                                <div id="alertPlaceholder"></div>
                                <div class="card mb-4">
                                    <div class="card-header"><h5 class="mb-0">User Access Overview</h5></div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label for="userAccessSummarySelect" class="form-label">Select User:</label>
                                            <select class="form-control" id="userAccessSummarySelect" style="width: 100%;"></select>
                                        </div>
                                        <p>This user <strong>grants mailbox access to</strong>: <strong id="grantsAccessToCount" class="text-primary">N/A</strong> user(s).</p>
                                        <p>This user <strong>has been granted access to</strong>: <strong id="hasAccessToCount" class="text-primary">N/A</strong> other mailbox(es).</p>
                                    </div>
                                </div>
                                <div class="card mb-4">
                                    <div class="card-header"><h5 class="mb-0">Add New Delegation</h5></div>
                                    <div class="card-body">
                                        <form id="addDelegationForm">
                                            <div class="mb-3">
                                                <label for="delegatorEmail" class="form-label">Delegator Email (Account to be accessed):</label>
                                                <select class="form-control dropdown-content" id="delegatorEmail" required></select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="delegateEmail" class="form-label">Delegate Email (User(s) to grant access to):</label>
                                                <select class="form-control dropdown-content" id="delegateEmail" multiple="multiple" required></select>
                                            </div>
                                            <button type="submit" class="btn btn-primary"><i class="fas fa-plus-circle me-2"></i>Add Delegation</button>
                                        </form>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header"><h5 class="mb-0">Current Delegations</h5></div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table id="delegationsTable" class="table table-hover">
                                                <thead class="table-light"><tr><th>Delegator Email</th><th>Has Delegated Access To:</th></tr></thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="peoplePageContent" class="page-content" style="display: none;">
                            <div class="page-content-wrapper">
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <h1><i class="fas fa-users me-2"></i>People Directory</h1>
                                </div>
                                <div class="people-grid" id="peopleGridContainer"></div>
                            </div>
                        </div>

                        <div id="drivePageContent" class="page-content" style="display:none;">
                            <div class="page-content-wrapper"><h1><i class="fab fa-google-drive me-2"></i>Drive Management</h1><p>Google Drive integration and management features.</p></div>
                        </div>
                        <div id="settingsPageContent" class="page-content" style="display:none;">
                            <div class="page-content-wrapper"><h1><i class="fas fa-cogs me-2"></i>Settings</h1><p>Application and user settings.</p></div>
                        </div>
                        <div id="logoutPageContent" class="page-content" style="display:none;">
                            <div class="page-content-wrapper"><h1>Logging out...</h1><p>You will be redirected shortly.</p></div>
                        </div>
                    </div> 

                    <footer class="pt-4 mt-auto text-muted text-center text-small">
                        <p class="mb-1">Â© <script>document.write(new Date().getFullYear())</script> BSC. All Rights Reserved.</p>
                        <ul class="list-inline">
                            <li class="list-inline-item"><a href="#">Privacy</a></li>
                            <li class="list-inline-item"><a href="#">Terms</a></li>
                            <li class="list-inline-item"><a href="#">Support</a></li>
                        </ul>
                    </footer>
                </div> 
            </div> 
        </div> 
    </div> 

    <div class="modal fade" id="successDelegationModal" tabindex="-1" aria-labelledby="successDelegationModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header bg-success text-white"><h5 class="modal-title" id="successDelegationModalLabel"><i class="fas fa-check-circle me-2"></i>Success!</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body" id="successModalMessage"></div><div class="modal-footer"><button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button></div></div></div></div>
    <div class="modal fade" id="dangerDelegationModal" tabindex="-1" aria-labelledby="dangerDelegationModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title" id="dangerDelegationModalLabel"><i class="fas fa-exclamation-triangle me-2"></i>Alert!</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body" id="dangerModalMessage"></div><div class="modal-footer"><button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button></div></div></div></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js" integrity="sha512-2ImtlRlf2VVmiGZsjm9bEyhjGW4dU7B6TNwh/hx/iSByxNENtj3WVE6o/9Lj4TJeVXPi4bnOIMXFIJJAeufa0A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
    
    <script src="script.js"></script>
</body>
</html>